function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();!function(e){!function(e){var n={attach:function(e,n){return this.hasOwnProperty(e)?!1:(this[e]=null,"undefined"!=typeof n&&(this[e]=n),!0)},detach:function(e){var n=void 0;return this.hasOwnProperty(e)&&(n=this[e],delete this[e]),n}};e.id=n}(e),function(e){var n=new(e.AudioContext||e.webkitAudioContext),t=void 0,r=void 0,a=void 0,i=void 0,o=function(e,n,t){if(e.length>=n)return String(e);for("undefined"==typeof t&&(t=" "),e=String(e);e.length<n;)e=t+e;return e},u=function(e){return o(Math.round(e/60),2,"0")+":"+o(Math.round(e%60),2,"0")};e.onEnded=function(){};var c=function(){function i(o){var u=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];_classCallCheck(this,i),t=new Audio,t.src=o;var c=n.createMediaElementSource(t);r=n.createGain(),a=n.createAnalyser(),c.connect(r),c.connect(a),r.connect(n.destination),null!==o&&t.addEventListener("loadeddata",function(){u&&t.play()}),t.onended=function(){e.onEnded.call(e)}}return _createClass(i,[{key:"change",value:function(){return t.paused?(t.play(),!0):(t.pause(),!1)}},{key:"paused",value:function(){return t.pause}},{key:"seek",value:function(e){console.log("seek",e),e>=0&&1>=e?t.currentTime=Math.round(e*t.duration):e>=0&&e<=t.duration&&(t.currentTime=e)}},{key:"setVol",value:function(e){e>=0&&1>=e&&(r.gain.value=e)}},{key:"vollume",value:function(e){r.gain.value+e>=0&&r.gain.value+e<=1&&(r.gain.value+=e)}},{key:"getAnalyzer",value:function(){return a}},{key:"timeline",value:function(){return t.currentTime/t.duration}},{key:"loop",value:function(e){t.loop=e}},{key:"close",value:function(){t.removeAttribute("src"),t.load()}},{key:"muteChange",value:function(){return t.muted=!t.muted,t.muted}},{key:"muted",value:function(){return t.muted}},{key:"calcTime",value:function(e){var n=e*t.duration;return u(n)+"/"+u(t.duration)}}]),i}();e.createAudioApplication=function(e){return"undefined"!=typeof i&&i.close(),i=new c(e)}}(e);var n=void 0,t=void 0,r=void 0,a=function(e,a,i){function o(){r=requestAnimationFrame(o),i.getByteFrequencyData(l),a.clearRect(0,0,n,t),a.fillStyle=f;for(var e=l.length,u=l[0],c=0;e>c;c++){var d=l[c];a.fillRect(8*c,3*t/4-d,5,d),a.beginPath(),a.moveTo(8*c,3*t/4),a.lineTo(8*c+5,3*t/4),a.strokeStyle="#000",a.lineWidth=1,a.stroke(),u<l[c]&&(u=l[c])}for(var s=8,v=s;u>v;v+=s)a.clearRect(0,3*t/4-v,n,1)}var u=arguments.length<=3||void 0===arguments[3]?.3:arguments[3];i.smoothingTimeConstant=u,i.fftSize=512;var c=i.frequencyBinCount,l=new Uint8Array(c);a.clearRect(0,0,n,t);var f=a.createLinearGradient(0,0,0,480);f.addColorStop(1,"#000000"),f.addColorStop(.75,"#ff0000"),f.addColorStop(.25,"#ffff00"),f.addColorStop(0,"#ffffff"),"undefined"!=typeof r&&cancelAnimationFrame(r),o()},i=function(e,a,i){function o(){r=requestAnimationFrame(o),i.getByteFrequencyData(l),a.clearRect(0,0,n,t);for(var e,u=n/c*1.5,f=0,d=0;c>d;d++){var s=l[d];e=s,a.fillStyle="rgb("+(e+100)+", 50, 50)",a.fillRect(f,t/2-e/2,u,e/2),a.beginPath(),a.moveTo(f,t/2),a.lineTo(f+u,t/2),a.strokeStyle="rgb( 50, 50, 50)",a.lineWidth=1,a.stroke(),a.fillStyle="rgba("+(e+100)+", 50, 50, 0.8)",a.fillRect(f,t/2,u,e/2),f+=u+4}}var u=arguments.length<=3||void 0===arguments[3]?.4:arguments[3];i.smoothingTimeConstant=u,i.fftSize=128;var c=i.frequencyBinCount,l=new Uint8Array(c);a.clearRect(0,0,n,t),"undefined"!=typeof r&&cancelAnimationFrame(r),o()},o=function(e,a,i){function o(){r=requestAnimationFrame(o),i.getByteFrequencyData(l),a.clearRect(0,0,n,t);for(var e,u=n/50,c=0,f=0;50>f;f++)e=l[f],a.beginPath(),a.moveTo(c,t/2+e/4-e/2),a.lineTo(u+c-1,t/2+e/4-e/2),a.strokeStyle="yellow",a.lineWidth=1,a.stroke(),c+=u+4}var u=arguments.length<=3||void 0===arguments[3]?.4:arguments[3];i.smoothingTimeConstant=u,i.fftSize=128;var c=i.frequencyBinCount,l=new Uint8Array(c);a.clearRect(0,0,n,t),"undefined"!=typeof r&&cancelAnimationFrame(r),o()},u=function(e,a,i){function o(){r=requestAnimationFrame(o),i.getByteFrequencyData(d),a.clearRect(0,0,n,t);for(var e=void 0,u=20,f=8,s=f;u>s;s++)e=d[s],a.beginPath(),a.arc(l,c,e,0,2*Math.PI),a.strokeStyle="#3498db",a.lineWidth=2,a.stroke()}var u=arguments.length<=3||void 0===arguments[3]?.2:arguments[3],c=t/2,l=n/2;i.smoothingTimeConstant=u,i.fftSize=128;var f=i.frequencyBinCount,d=new Uint8Array(f);a.clearRect(0,0,n,t),"undefined"!=typeof r&&cancelAnimationFrame(r),o()},c=function(e,a,i){function o(){r=requestAnimationFrame(o),i.getByteTimeDomainData(l),a.clearRect(0,0,n,t),a.lineWidth=2,a.strokeStyle="#f1c40f",a.beginPath();for(var e=1*n/c,u=0,f=0;c>f;f++){var d=l[f]/128,s=d*t/2;0===f?a.moveTo(u,s):a.lineTo(u,s),u+=e}a.lineTo(n,t/2),a.stroke()}var u=arguments.length<=3||void 0===arguments[3]?.8:arguments[3];i.smoothingTimeConstant=u,i.fftSize=2048;var c=i.fftSize,l=new Uint8Array(c);a.clearRect(0,0,n,t),o()},l=function(e){n=e.width,t=e.height},f={init:l,bar:a,bar2:i,line:o,circle:u,sinewave:c};e.audio=f}(window);
